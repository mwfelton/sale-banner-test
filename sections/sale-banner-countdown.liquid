{{ 'sale-banner-countdown.css' | asset_url | stylesheet_tag }}

<section class="sale-banner" id="sale-banner-{{ section.id }}">
  <div
    class="sale-banner__bg"
    style="background-image: url({{ section.settings.background_image | image_url: width: 2000 }});"
  >
    <div class="sale-banner__content">
      <div class="sale-banner__left">
        <div class="sale-banner__heading-wrapper">
            {% if section.settings.heading != blank %}
                <h2 class="sale-banner__heading">
                    {{ section.settings.heading }}
                </h2>
            {% endif %}

            {% if section.settings.subheading != blank %}
                <p class="sale-banner__subheading">
                    {{ section.settings.subheading }}
                </p>
            {% endif %}
        </div>

        {% if section.settings.button_label != blank %}
          <a
            href="{{ section.settings.button_link }}"
            class="sale-banner__button"
          >
            {{ section.settings.button_label }}
          </a>
        {% endif %}
      </div>

      <div
        class="sale-banner__right"
        data-countdown
        data-end="{{ section.settings.end_datetime }}"
      >
        <span class="sale-banner__icon">{{- 'icon-calendar.svg' | inline_asset_content -}}</span>

        <span data-days>
            <strong class="sale-banner__number">12</strong>
            <span class="sale-banner__label">days</span>
        </span>
        <span class="separator">:</span>

        <span data-hours>
            <strong class="sale-banner__number">22</strong>
            <span class="sale-banner__label">hours</span>
        </span>
        <span class="separator">:</span>

        <span data-mins>
            <strong class="sale-banner__number">54</strong>
            <span class="sale-banner__label">mins</span>
        </span>
        <span class="separator">:</span>

        <span data-secs>
            <strong class="sale-banner__number">44</strong>
            <span class="sale-banner__label">secs</span>
        </span>
      </div>

      <div class="sale-banner__ended" hidden>
        {{ section.settings.ended_text }}
      </div>
    </div>
  </div>
</section>

<script src="{{ 'sale-banner-countdown.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Sale banner countdown",
  "settings": [
    {
        "type": "image_picker",
        "id": "background_image",
        "label": "Background image"
    },
    {
        "type": "inline_richtext",
        "id": "heading",
        "label": "Heading",
        "default": "Final days of our <strong>Summer Sale</strong>."
    },
    {
        "type": "inline_richtext",
        "id": "subheading",
        "label": "Subheading",
        "default": "Save up to <strong>30% on selected items</strong>."
    },
    {
        "type": "text",
        "id": "button_label",
        "label": "Button label",
        "default": "Shop the sale"
    },
    {
        "type": "url",
        "id": "button_link",
        "label": "Button link"
    },
    {
        "type": "text",
        "id": "end_datetime",
        "label": "End date/time (YYYY-MM-DDTHH:MM:SS)",
        "default": "2025-12-31T23:59:59"
    },
    {
        "type": "text",
        "id": "ended_text",
        "label": "Ended message",
        "default": "Sale ended"
    }
  ],
  "presets": [
    {
      "name": "Sale banner countdown"
    }
  ]
}
{% endschema %}
